from __future__ import division, print_function
from visual import *
from visual.controls import *
import wx

# Functions that are called on various events

def setleft(evt): # called on button events
    cube.dir = -1

def setright(evt): # called on button events
    cube.dir = 1

def setred(evt): # called by menu item
    cube.color = color.red
    t1.SetSelection(0)

def setcyan(evt): # called by menu item
    cube.color = color.cyan
    t1.SetSelection(1)

def togglecubecolor(evt): # called by radio buttons
    choice = t1.GetSelection()
    if choice == 0:
        cube.color = color.red
    else:
        cube.color = color.cyan

def cuberate(value):
    cube.dtheta = 2*value*pi/1e4
    
def setrate(evt): # called on slider drag events
    value = s1.GetValue()
    cuberate(value) # value is min-max slider position

L = 350
w = window(width=2*L, height=L)
display(window=w, width=L, height=L, range=1.5, forward=-vector(0,1,1))
cube = box(color=color.red)

p = w.panel

left = wx.Button(p, label='Rotate left', pos=(L+20,15))
left.Bind(wx.EVT_BUTTON, setleft)

right = wx.Button(p, label='Rotate right', pos=(1.5*L+20,15))
right.Bind(wx.EVT_BUTTON, setright)

s1 = wx.Slider(p, pos=(1.1*L,0.7*L), size=(0.7*L,20), minValue=0, maxValue=100)
s1.Bind(wx.EVT_SCROLL, setrate)
wx.StaticText(p, pos=(1.1*L,0.65*L), label='Set rotation rate')

t1 = wx.RadioBox(p, pos=(1.1*L,0.3*L), size=(0.25*L, 0.2*L),
                 choices = ['Make red', 'Make cyan'], style=wx.RA_SPECIFY_ROWS)
t1.Bind(wx.EVT_RADIOBOX, togglecubecolor)

m = w.menubar

menu = wx.Menu()
item = menu.Append(-1, 'Rotate left', 'Make box rotate to the left')
w.win.Bind(wx.EVT_MENU, setleft, item)

item = menu.Append(-1, 'Rotate right', 'Make box rotate to the right')
w.win.Bind(wx.EVT_MENU, setright, item)

item = menu.Append(-1, 'Make red', 'Make box red')
w.win.Bind(wx.EVT_MENU, setred, item)

item = menu.Append(-1, 'Make cyan', 'Make box cyan')
w.win.Bind(wx.EVT_MENU, setcyan, item)

m.Append(menu, 'Options')

s1.SetValue(70) # update the slider
cuberate(s1.GetValue()) # set the rotation rate of the cube
cube.dir = -1 # set the rotation direction of the cube

while True:
    rate(100)
    cube.rotate(axis=(0,1,0), angle=cube.dir*cube.dtheta)
       
